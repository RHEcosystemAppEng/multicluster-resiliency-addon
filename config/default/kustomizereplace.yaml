# Create the appropriate name labels for the deployment
- source:
    fieldPath: metadata.name
    kind: Deployment
  targets:
    - fieldPaths:
        - metadata.labels.[app.kubernetes.io/name]
        - spec.template.metadata.labels.[app.kubernetes.io/name]
      select:
        kind: Deployment
      options:
        create: true

# Create the appropriate name label for teh cluster management addon
- source:
    fieldPath: metadata.name
    kind: ClusterManagementAddOn
  targets:
    - fieldPaths:
        - metadata.labels.[app.kubernetes.io/name]
      select:
        kind: ClusterManagementAddOn
      options:
        create: true

# Set the service account name as an argument for the manager deployment. Used in the validation webhook.
- source:
    fieldPath: metadata.name
    kind: ServiceAccount
  targets:
    - fieldPaths:
        - spec.template.spec.containers.[name=manager].args.2
      select:
        kind: Deployment
      options:
        delimiter: =
        index: 1
